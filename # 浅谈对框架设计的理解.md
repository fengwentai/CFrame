# 浅谈对框架设计的理解

### 模块内容

#####   资源管理   UI管理器 配置模块 网络模块 热更模块  场景管理器 事件系统 数据模块 角色模块  装备模块  道具模块 输入模块 同步模块  工具类  地图编辑器  技能编辑器  日志系统  多语言系统  剧情管理器  NPC模块  设置模块  新手引导    红点系统  任务系统  AI模块  技能模块    sdk

### 设计注意点
#### 推崇接口化编程  
##### 先设计接口
先设计接口的好处，一是可以更好的理清模块，二是开发过程中可以和其他依赖该模块接口的其他同事并行开发。
##### 不关注实现 只需要了解接口
如果一个模块，需要调用另外一个模块的内容，只需要打开接口类  就知道有哪些接口可供调用，不管内部实现代码质量如何，都不用太多思考。 只需鉴别接口的对错就可以。
#####  尽可能少的暴露接口
字段的访问权限更大，就有可能被错误的调用，造成不必要的bug。同时给需要了解该模块的人，增加认知负担。
##### 理清设计模块之间的包含，继承，调用关系。
设计一个模块，可以先把功能抽象成 几个有意义的对象。根据功能，利用合适的设计模式，组装成可实现的功能。
#####  生命周期的重要性
设计一个模块 要了解该模块的周期，初始化的时机，释放的时机，Update逻辑，何时刷新。在必要的时候 调用释放接口。保证堆内存释放，资源释放。
##### 单向管理
尽量保证不同级的类对象 单向调用  更容易理清每个对象的生命周期
##### 合理封装，避免一个函数太多代码
把功能 封装成有意义的函数。如果可以通用的那种，可以放到Util函数里。不能通用的，尽量在类内部复用
##### 缓存变量
如果一个类里面 反复用到一个接口，可以把该接口缓存起来。同时注意  该接口 的返回类型是引用传递还是值传递。其次注意  返回值是否是可变的。
好处是：代码清晰，某些情况下 可以优化性能
#### 组合>继承
除非很明显的继承关系，否则尽量避免使用继承关系。牵强的继承 会增大不必要的维护成本 和特殊处理。 简单的例子：NPC 和怪物 如果都继承角色类，会让NPC有很多怪物没有的属性。同时在处理 角色 这个对象时 还要可以考虑 npc的话 是否会出问题。

##### 数据 UI 解耦
在rpg游戏里，理想情况下，前端可以在没有UI  仅留输入接口的情况下 也可以跑正常的逻辑。虽然在UI比较重的游戏里，没必要这样。但是保证UI和数据的解耦也会增加代码的强壮性 和 可扩展性。

